---
title: 最新LLMで“バイブコーディング”を実践（要件定義〜機能実装①）
author: kenta-kirihara
date: 2025-08-08
tags: [生成AI,AI,chatgpt,ClaudeCode]
---

## はじめに

現在、**ChatGPT Pro** と **Claude Max (20×)** を契約しており、生成AIによる開発工程の効率化の検証を進めています。その実力を把握する目的で個人的にバイブコーディング（vibe coding）を試行してみました。モチベーションを保つため、筆者が最近プレイしているオンラインカードゲーム「シャドウバース ワールズ ビヨンド（以下、WB）」を対象としたシステムを題材に選びました。

## 前提

ゲーム上達の近道は**上手い人のプレイを見る**こと、そして**上手い人に教わる（コーチング）**こととされます。前者はプレイ動画・解説動画で容易に実践できますが、後者はハードルが高めです。**最新の大規模言語モデル（LLM）で、対戦後レビューに相当する「AIコーチング」をどこまで実現できるか**を検討しました。

**※（わかる人向け）2025/8/12時点の筆者の「シャドウバース ワールズ ビヨンド」プレイ状況**

* ナイトメア：460勝（「ミッドレンジナイトメア」でマスター到達）
* エルフ：50勝（「リノセウスエルフ」練習中）
* ビショップ：5勝（「守護ビショップ」を試行）
* 第2弾パックから開始の**微課金**のため、他リーダーは未着手

## 検討したシステム（概要）

**Shadowverse\:WB対戦動画を自動解析し、重要場面抽出と改善提案を提示する対戦後レビューAI。レビューまでは現在のAIでも難しい場合は対戦動画の統計情報収集目的で使用する**

---

## 今回の取り組み範囲

**第一弾**として、（1）要件定義、（2）基本設計、（3）1機能（カードDB）の実装を、**AI主導＋人間検証**の流れで実施しました。

---

## 要件定義・基本設計

### 1) 要件定義（作成と補強）

* **使用モデル**：ChatGPT 5 Thinking（8月時点の最新推論モデル）
* **プロンプト**：本企画の説明を与え、「要件定義書を作成」
* **初期成果**：目的・スコープ、ユースケース、成果物/非機能、全体構成、データモデル等が一通り出力
* **補強**：WB固有の用語/仕様、**法務・コンプライアンス**の明文化を依頼し追記

以下、生成結果の抜粋

**（抜粋：目的とスコープ）**

> 本書は、Shadowverse: Worlds Beyond のプレイ動画を自動解析し、戦略的アドバイスを生成するAIシステムの要件を定義する。対象は**動画解析・カード認識・状態推定・アドバイス生成**、対象外は**リアルタイム対戦支援・クライアント改変・自動プレイ**。&#x20;

**（抜粋：業務要件の課題と改善）**

> 課題：**プレイミスの客観把握が困難**／**最適ライン学習に時間**／**振り返りが主観的**。
> 改善：**客観分析の提供**、**代替ライン提示**、**重要場面の自動抽出**。&#x20;

**（抜粋：機能一覧の要点）**

> F-01 動画取込、F-02 フレーム抽出、F-03 UI要素検出、F-04 カード認識、F-05 イベント抽出、F-06 状態復元、F-07 助言生成、F-08 レポート、F-09 ナレッジ取得、F-10 ベクトル索引*&#x20;

**（抜粋：非機能の主要指標）**

> 15分動画を**2分以内**、カード認識Top-1 **95%以上**、**100ジョブ並列**、API応答**1秒（95pctl）**。&#x20;

**（抜粋：外部I/Fの要点）**

> Web UI（アップロード／進捗／レポート／カード詳細）、YouTube API・攻略サイト・S3互換と連携。API：`POST /api/v1/analyze`、`GET /api/v1/analyze/{job_id}`。 &#x20;

**（抜粋：データ要件—カードマスタ）**

> `card_id, name_jp, cost, attack, defense, card_class, card_type, ability_text, image_url, is_token`。&#x20;

**（抜粋：法務・コンプライアンス）**

> **対戦後レビュー専用**／**非提携の明示**／**必要最小限の引用と出典**。禁止：クライアント改変、通信傍受、自動プレイ、WIKI画像再配布、**大会中のリアルタイム利用**。必須表記：
> `© Cygames, Inc.`
> `本サービスはCygamesの提供・後援ではありません。`&#x20;

* **補注**：要件定義書にはユースケース・画面イメージ等も整理済み（例：**動画アップ→自動解析→レポート→レビュー**の流れ）。&#x20;

### 2) 基本設計（要件定義を入力として生成）

* **プロンプト**：「要件定義書を添付。これを基に**基本設計書**を作成」
* **成果**：機能一覧と責務境界、共通設計（データ識別子・ストレージ・権利表記）、各機能の入出力・SLO、テスト観点・KPIなど

以下、生成結果の抜粋

**（抜粋：機能一覧と責務境界）**

> **F-09 ナレッジ取得**＝公式カード/攻略WIKIの**差分クロール・正規化**、**F-10 ベクトル索引**＝テキスト/画像の**埋め込み・近傍検索**。&#x20;

**（抜粋：共通設計）**

> 識別子：`job_id, event_id, state_id, card_id, kb_doc_id`。
> ストレージ：S3/MinIO（原動画・レポート等）、PostgreSQL（**cards/knowledge\_docs…**）、Parquet（events/states）。
> UIフッターに\*\*©表示と非提携表記\*\*を常時掲示。 &#x20;

**（抜粋：RAG/クローラ）**

> 公式Deck Portalの**カード一覧**をソースに、**名前/クラス/タイプ/コスト/ATK/DEF/テキスト/画像URL**等を収集し、「**トークンを含む**」設定に対応。**ETag/If-Modified-Since**やハッシュ比較で差分取得、指数バックオフを備える。 &#x20;

**（抜粋：テスト観点／KPI）**

> UI検出の系列一致、カード認識Top-5、イベント検出のPrecision/Recall、助言の**根拠URL付与率**、E2E（**15分≤2分**、主観評価≥**4.2/5**）。&#x20;

---

## 実装（バイブコーディング）①：カードデータベース

### 位置づけと目的

AI本体（認識・助言）に先立ち、**カード情報の正規化DB**を整備しました。後続の**カード認識結果の正当化**や**助言根拠の提示**に必須となるため、最初の実装対象としています。

### 開発環境

* Windows 11
* Visual Studio
* Claude Code (Opus 4.1)
* Playwright MCP Server

### スキーマ設計

* **プロンプト**：「WBゲーム概要と要件定義書を参照し、カードDBスキーマを作成」
* **成果**：PostgreSQL／SQLite向けスキーマを生成。主要項目は**要件定義書のデータ要件**と整合（下記に再掲）。

  * `card_id, name_jp, cost, attack, defense, card_class, card_type, ability_text, image_url, is_token`&#x20;

### 公式ページの解析とクローラ生成

* **前提**：公式の**カード一覧**ページから画像・テキスト等を取得可能。
* **プロンプト**：「カード一覧ページをPlaywrightで開き、構造を解析。可能なら**カードAPI**を特定し、**Python**でクローラを実装」
* **実行結果**：Playwright MCPで該当ページを開き、ページ構成の把握と**カード情報APIの特定**に成功し、**Playwright＋Python**によるクローラを生成。初回実行では**通常カード275枚**を収集。
* **課題と修正**：**トークンカード**が未収集であることを確認。**「トークンを含む」一覧URL**を提示して修正し、**最終的に327枚**をDB化。
* **運用考慮**：差分取得（If-Modified-Since/ETag・ハッシュ）、**指数バックオフ**で安定化（基本設計の方針に準拠）。 &#x20;
* **補足所感**：Playwright MCPサーバは、E2Eテスト自動化の文脈で有用との認識はあったが、WEBクローリングやスクレイピングの実装にも使用できることが分かった。ただし、重量級ページを開く場合は25,000トークンの上限に達し、読み込み途中でエラーが発生するケースがあった。この問題により実装が進まない場合は回避策を検討する必要がある。

---

## 所感

**要件定義〜基本設計の初期ドラフト**をLLMで素早く整備できました。単なるアイデア出しやドキュメント作成以外でも、法務面の調査などの調査作業も代行してくれるのでかなりの時間が削減できるのではないかと思います。

実装では「**AIによる自動生成 →  生成結果を確認して追加指示**」のサイクルで実装が高速で進み、不足点があっても追加の指示を行うことで少ない手戻りで修正できました。全てをAI任せにするのは現時点ではまだ難しい感触ですが、ここまでの流れが**たった一日**で完了するのは驚異的。本システムを完成させるにはまだまだ工程が必要ですが、モチベーションが続く限り進めていきたいと思います。

---

## 出典
`© Cygames, Inc.`

