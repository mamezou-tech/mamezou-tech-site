---
title: メーカーでのアジャイル、ウォーターフォール、そしてV字モデル：誤解を解き明かす
author: takayuki-oguro
date: 2024-04-30
tags: [アジャイル開発, スクラム, 組込み]
---

# はじめに

開発手法の選択はプロジェクトの成功に直結します。
私自身はアジャイル専門のコンサルタントではありませんが、メーカーでの開発プロセス改善のコンサルの中でアジャイルの導入も行っています。その中で、アジャイル、ウォーターフォール、V字モデルはよく誤解されがちな概念です。
この記事では、これらの違いと適用の際の考慮点について、私の個人的な経験と具体的な事例を交えて解説します。

# V字モデルとウォーターフォールの混同、そしてアジャイルの誤解

多くの場合、V字モデルとウォーターフォールは同一視されますが、これは、正確ではありません。
ウォーターフォールは、一連の連続したフェーズ（要件定義、設計、実装、検証、保守）を段階的に進める方法で、1つのフェーズが完了すると次のフェーズに移る時間軸の話です。
それに対して、V字モデルは実際にコーディングする前に分析や設計をすることで見逃されがちな欠陥を未然に防ぐ、といった作業順序の話です。決して、時間軸の話ではありません。

アジャイル開発はウォーターフォールと比較して説明することが多いため、V字モデルとウォーターフォールを同一視している人達の間で「アジャイル＝V字モデルを否定する考え」が、今でもよく聞かれます。しかし、アジャイルはウォーターフォールが開発後半に起こす手戻りを問題視しているだけであり、手戻りを少なくする作業の順序性を否定しているわけではありません。

ウォーターフォール
![ウォーターフォール](/img/blogs/2024/0430_no-feedback-agile/no-feedback-agile_01.png)  

V字モデル
![V字モデル](/img/blogs/2024/0430_no-feedback-agile/no-feedback-agile_02.png)  


# アジャイルにおけるV字モデルの存在

V字モデル内の工程の順序は、ざっくりというと「考えて分かることは机上で考え、その後にコードを実装すると手戻りが少ない」のような経験の知識を整理してできたものです。
アジャイル開発は、ウォーターフォールがプロジェクトの終盤で多くの手戻りを生む失敗を踏まえ「机上で考えて分かることには限界がある」という現実を受け入れます。そして「実際に実装してみてすぐにフィードバックすることで、ウォータフォール的な大きな手戻りを防止する」ことを教えてくれます。

1. Ｖ字モデルによる手戻りの少ない作業の順序を用いて、
2. 机上では分からない要素を含んだままの状態で（薄く）モノを作り、
3. フィードバックを手近に得る

ことで、大きな手戻りを防止する、という考え方です。スプリントの中に従来通りのV字モデルの手順が存在しています。

# インクリメンタル開発とアジャイルの微妙な違い

私は様々なメーカーでの組み込みソフトの開発に関わっています。メーカーでの組込みソフトの開発は、Web開発などに比べて、非アジャイルなイメージがあると感じています。しかし、決して下図のようなウォーターフォールではありません。

ウォーターフォール
![ウォーターフォール](/img/blogs/2024/0430_no-feedback-agile/no-feedback-agile_01.png)  

民生品ではないBtoBの製品を扱うメーカーでは、短期的な製品化を求められることが多いため、製品をリリースしてから、より高度の機能を追加したソフトだけを後から出荷する（＝アップデート）、といったインクリメンタルな開発が普通に行われています。
たとえば、典型的な例はこのようになります。
１回のステップが数か月で、以下のように続きます。
ここでは誤解を恐れずに書きますが、このようなインクリメンタルな開発ステップを、現場では「イテレーション」と呼んでいたりします。
- 「イテレーション１：基本機能によるハードウェア単独動作の確認」
- 「イテレーション２：小さな応用機能の開発1」
- 「イテレーション３：小さな応用機能の開発2」
製品リリースせざるを得ないタイミングで製品リリースし、その後に残った機能を開発していきます。

インクリメンタルな開発
![インクリメンタル](/img/blogs/2024/0430_no-feedback-agile/no-feedback-agile_03.png) 

このため、メーカーの開発者は「アジャイルは非ウォーターフォールだ」という話を聞くと、「俺たちだってウォーターフォールじゃなくて、先進的な"インクリメンタル"な開発をしている」と感じますし、実際にそう言います。
また、「インクリメンタルだってアジャイルの一派」という柔軟な考え方が語られることもあります。

しかし、この開発スタイルは、１回のイテレーションが長くて、フィードバックサイクルが回りません。
これは、製品の要求のフィードバックサイクルも回りませんし、レトロスペクティブも行われないか行われてもフィードバックされないままになっています。
これは、私にとって、アジャイル開発の持つ良さが発揮されていないと感じられます。

これが、メーカーにおける開発期間の延長や、品質低下、メンテナンス工数の肥大化につながっていると考えています。

# アジャイルの皮を被ったウォーターフォール開発の実例

私が関わったあるチームでは、スクラムの手法を採用しつつも、実際にはフィードバックが得られない「ウォーターフォール化」したスプリントを経験しました。これは、アジャイルの名の下に古い開発慣習が続いている一例です。

前述した通り、メーカーでは、インクリメンタルな開発がみられることがあります。
この場合、アジャイル開発を導入しようとすると、インクリメンタルな開発のイテレーション期間を非常に短くする感覚に陥ります。たとえば、「今までの開発の区切り方を１週間や２週間に区切ればよい。その周期ごとに振り返りをすれば良い」という理解のチームが多く発生します。
また、メーカーでアジャイルを取り入れようというチームは、新しいものを取り入れることに挑戦的です。ペアプロなどのプラクティスの導入をするチームもあります。私が関わったチームでも、ペアプロの効果でプログラマ全体のスキルアップが進みました。そこでアジャイルへの満足が生まれます。

しかし、ここから、成長が止まります。そこには大きな問題点があったのです。
彼らは、プロダクトバックログをうまく作れない...。無意識に、従来のインクリメンタルな開発の開発ステップを小さく切る考え方を基本としてしまいます。ユーザーストーリーらしく書いたとしても、その実、中身はV字モデルの中の一工程を小さくしたものにすぎないのです。それを、スプリントとして実行してしまうのです。

私は時折チームを訪れて様子を見るのですが、朝会やプロダクトバックログリファンメントを見ていると、どうにもメンバーが楽しくなさそうに感じます。成長が続いていない・難しい技術課題を抱え込んでいる様子でした。

蓋を開けてみると、スプリントの内容が、以下のようになっていました。
- 「スプリント1：〇〇の分析 + ... 」
- 「スプリント２：〇〇の設計1 + ... 」
- 「スプリント３：〇〇の設計2 + ... 」
- 「スプリント3：〇〇の実装 + ... 」

１回のスプリントが Ｖ字モデルの一工程をやっているだけなので、俊敏にフィードバックを得て学んでゆくという果実を得られていなかったのです。おいしい果実が得られなければ、それは楽しくなくて当然だと思いました。

説明をして、理解して貰いましたが、まだ、みんなが消化できている訳ではないと思います。

１週間や２週間という短い期間で実際に動くプログラムを作ることで、課題に気づいたり、問題がないことに安心できます。このとき、１回のスプリント内でV字モデルの範囲全体を実施しているはずです。

繰り返しますが、この中では、以下の２つが両立しているのです。
- 「スプリント内での手戻りをより少なくするためには、過去の人たちの英知であるV字モデルを原則とする」
- 「やってみないと分からないことへは、スプリントやデイリーのフィードバックサイクルというアジャイルの英知で取り組む」

この私の経験は、「このチームはインクリメンタルだがイテレーティブではなった」とも表現できます。
メーカーの現場には、今までのインクリメンタルな開発の経験が沁みついていることから、このような問題が起きやすいことを、理解しました。
今後は、イテレーティブを通してフィードバックサイクルが回る大切さ、を明確に言葉にしたいと考えています。

インクリメンタルな開発
![インクリメンタル](/img/blogs/2024/0430_no-feedback-agile/no-feedback-agile_03.png) 

イテレーティブな開発
![イテレーティブ](/img/blogs/2024/0430_no-feedback-agile/no-feedback-agile_04.png) 

# 最後に

メーカーでもアジャイル開発は、重要になってきていると思いますが、その成果/果実を手にすることを目的としなければなりません。
スクラムなどのアジャイルなプロセスを導入することが目的になってはいけません。
また、アジャイルなプロセスの導入に反発して、フィードバックサイクルの無いインクリメンタルな開発を、アジャイルをやっていると豪語しつつも、その実、仕事が順調にならないことも嬉しくありません。

私にアジャイルを教えてくれた人が「アジャイルでは、自分たちが楽しいと思えるようにすると良い」と言っていました。良い製品と成長する自分たち、という果実を手にし続けられる、楽しいと感じられるアジャイルライフを送って欲しいと思います。

皆さんのプロジェクトでの経験や、これらの方法論の適用に関する考えをぜひ共有してください。異なる視点からの意見交換は、さらなる学びと成長の機会を提供します。

