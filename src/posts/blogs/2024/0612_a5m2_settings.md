---
title: 【新人さん向け】A5:SQL Mk-2のおすすめ設定と使い方
author: kenta-ishihara
date: 2024-06-08
tags: [新人向け, tips]
image: true　
---

# はじめに

最近漬物とゆで卵を合わせればタルタルソースみたいにおいしくなるのでは？と思い、キムチと野沢菜のワサビ入り浅漬けで試した石原です。(不味くはないですがおすすめはしません)

色々な案件で利用する機会が多いDB開発ツール[A5:SQL Mk-2](https://a5m2.mmatsubara.com/)[^1] (以後A5M2と記載)について、新人さん向けにおすすめの設定と使い方について記載します。

## ワークスペースの設定
DB操作でのやらかしとして「開発環境を操作していたつもりが実は別環境だった」ことありませんか。
そんな不測の事態を防ぐために、まず初めにワークスペースの設定をすることをおすすめします。

ワークスペースとはDBの登録情報や開いているファイルの情報をひとまとめにしたもので、
イメージとしては環境ごとに作業台を用意してそれぞれで分けてDB操作を行えるイメージです。

実際に設定してみましょう。
1. A5M2を起動して以下のようなダイアログが表示されるので、画面左下の追加ボタンを押下
![ワークスペース設定手順１](/img/blogs/2024/0509_a5m2_settings/workspace_1.png)
   (もし上記が表示されない場合はツールバーの設定 > ワークスペースの起動と管理より表示)

2. 接続先の環境がわかるように命名し、OKボタンを押下
![ワークスペース設定手順２](/img/blogs/2024/0509_a5m2_settings/workspace_2.png)

3. 接続する環境でそれぞれ設定する
![ワークスペース設定手順３](/img/blogs/2024/0509_a5m2_settings/workspace_3.png)

## 注意が必要なデータベースの設定
ワークスペースは分けても、誤操作の危険性はまだまだあります。
データベースに本番環境用の設定をしましょう。

1. 画面左端のスペースで右クリック > データベースの追加と削除 を押下
![本番設定手順１](/img/blogs/2024/0509_a5m2_settings/productio_setting_1.png)

2. 該当DBを選択して修正ボタン押下
![本番設定手順２](/img/blogs/2024/0509_a5m2_settings/productio_setting_2.png)

3. DBタイプ：本番環境にチェック、色をわかりやすい色(おすすめは赤)を選択してOKボタン押下
![本番設定手順３](/img/blogs/2024/0509_a5m2_settings/productio_setting_3.png)

上記設定をしておくことで、接続時に「本番環境(または注意が必要なデータベース)に接続します」のチェックを入れないと接続できないようになります。本番環境に接続する際は覚悟をもってチェックを入れましょう。
![本番設定手順４](/img/blogs/2024/0509_a5m2_settings/productio_setting_4.png)

## トランザクションの設定
更新/削除時に別レコードも操作してしまったこと、あるのではないでしょうか。
A5M2ではCRUD操作時に自動でトランザクションを開始する設定があるので紹介します。

1. ツールバーの設定 > オプション を押下
![トランザクション設定手順１](/img/blogs/2024/0509_a5m2_settings/transaction_1.png)

2. データベース接続 > データベースの更新時に自動的にトランザクションを開始する にチェックを入れてOKボタン押下
![トランザクション設定手順２](/img/blogs/2024/0509_a5m2_settings/transaction_2.png)

上記設定後にDB更新と左上のアイコンが点滅し、押下することでコミットまたはロールバックを選択できるようになります。
![トランザクション設定手順３](/img/blogs/2024/0509_a5m2_settings/transaction_3.png)

## 結果セットの比較
実装した機能が想定通りのデータ更新をおこなっているか確認したい、そんな時は結果セットの比較が有効です。
1. 確認したいデータを対象とするクエリを作成、実行する。
   ![結果セット比較１](/img/blogs/2024/0509_a5m2_settings/result_set_comparison_1.png)
2. 以下のアイコンを押下
   ![結果セット比較２](/img/blogs/2024/0509_a5m2_settings/result_set_comparison_2.png)
3. ダイアログが表示されるので、確認したい処理を実行してデータ更新する。その後実行(比較)ボタン押下
   ![結果セット比較３](/img/blogs/2024/0509_a5m2_settings/result_set_comparison_3.png)
4. 結果セットの比較ダイアログが表示されるので、Excelに出力ボタン押下するとExcelに差分が表示される。
   ![結果セット比較４](/img/blogs/2024/0509_a5m2_settings/result_set_comparison_4.png)
   ![結果セット比較５](/img/blogs/2024/0509_a5m2_settings/result_set_comparison_5.png)

単体テストのエビデンスとしても有用で、チームで統一したら担当者ごとのエビデンスの表記揺れが減って良いかと思います。

## 終わりに
ふと気になりA5M2のリリースノートを確認すると、β版は1997年7月に公開され、それから現在[^2]もなおアップデートが行われているという事実に驚きが隠せません。
普段何気なく使っているツールも誰かが作成し、メンテナンスいただいているからこそ使えるのだという事実をあらためて認識した上、感謝の念をもって利用していければと思います。

[^1]:SQL開発ツール。自分は"エーゴ・エムツー"と呼びますが呼称は諸説あるよう。新人時代に周りが「エーゴ、エーゴ」と言って、(english?)と思った人は少なくないはず。
[^2]:現在(2024年6月)から換算しても27年間。これを見てる新人の人で(自分まだ生まれてないです)って思いながら見てる人、いると思います。