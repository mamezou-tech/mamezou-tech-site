---
title: 選択された結果を分析する（２項検定）
author: shuichi-takatsu
date: 2022-06-10
tags: [Analytics]
---

皆さんは仕事やプライベートで「アンケート」への回答を求められた経験をお持ちだと思います。  
アンケート回答方法としては複数の選択肢から選ぶもの、点数を付けるものなど様々でしょう。  
回答する側から言わせてもらえれば、手間のかかるアンケートだと回答する気力が失せるので、回答の選択肢が「はい・いいえ」くらいの簡単なアンケートの方が応えやすいですね。  
過去、大手フリマサイトの購入者・出品者の評価は「良い・普通・悪い」からの３択でしたが、現在は「良い・悪い」の２択になっているようです。  

仕事や生活で周りを見渡してみると意外と「２択」が多いことに気が付きます。  
「有るのか・無いのか」「するのか・しないのか」「出来たのか・出来なかったのか」などなど。  
目の前に示された”選択の結果”が従来のパターンと違っているのかが分かれば、その後の判断材料になるでしょう。

今回は２択の結果を検定する方法「２項検定」を[jamovi](https://www.jamovi.org/)を使って説明していきます。

[[TOC]]

## ２項検定とは

選択肢が「はい」と「いいえ」のように２つしか存在しない変数（２値変数）について，「はい」と「いいえ」の比率が想定した比率と比べてどうなのかを確認する方法が「２項検定」です。

選択肢を増やせば増やすほど細かい評価が可能になりますが分析も大変になります。  
その点、「はい・いいえ」や「有り・無し」などの選択肢が２つしかないケースなら回答する側の負荷も、データを収集・分析する側の負荷も下がります。

２項検定は取り得る値が２つしかない値の分布が「２項分布」に従うことを利用した検定です。

## お題「新製品の評価」

あるソフトウェア開発組織では定期的に製品のバージョンアップを行っている。  
製品がリリースされた後に製品の評価をユーザに求めているが、近年では多値での評価ではなく２値（良い・悪い）で評価をしてもらっている。  
今回のリリースで回収したアンケート総数は全部で１０７件で、良い・悪いの件数は以下のようだった。
（簡単化のため、未回答のアンケートは無かったとする）

| 良い | 悪い |
|:---:| :---:|
| 62 | 45 |

従来では  
`良い：悪い＝７：３`  
の割合で推移していたが、今回の割合は従来と比較して有意に差があると言えるだろうか。

## 1標本比例検定「２項検定」

[jamovi](https://www.jamovi.org/)を起動し、以下のようにデータを設定します。  

![](https://gyazo.com/d20f1738688501b842b1728aeed74c71.png)

注意する点としては、「評価」と「回答数」の両方のデータ型を  
`データ尺度＝「名義尺度」`  
`データ型＝「整数」`  
にすることです。  
本来ならば「回答数」データは整数なので連続データのように思いますが、後で度数分布に変換するために、jamoviへの変数登録は「名義尺度」か「順序尺度」を使用する必要があります。今回の場合は「名義尺度」を使用しました。

評価のデータが１，２では分かりづらいので  
`１：「良い」`  
`２：「悪い」`  
とラベルを付けます。

メニューから「分析」－「度数分析」－「２値目的変数（２項検定）」を選択します。

![](https://gyazo.com/6764e6565d582911d38556d8db9318f0.png)

設定パネルが表示されるので、以下のように設定します。  
「度数として処理」にチェックを入れると、検定量が設定できるので、ここでは「０．７」（７０％）を設定します。

![](https://gyazo.com/879f5a15da06a09714207dc4be970a40.png)

すると以下のような結果が得られました。

![](https://gyazo.com/721966f5493087e53f3534859365e137.png)

水準の１は「良い」の方のデータを指しています。今回利用するのは上段のデータのみです。  
p値は「０．００８」となっているので「有意差有り」です。
つまり「アンケート結果”良い”＝７０％」を棄却して、「”良い”＝７０％とは言えない」ということになります。

## ベイズによる検定

２項検定のオプションを使って「ベイズ統計」で検定してみましょう。  
（最近、筆者はベイズ統計にハマっています）

設定で変更する部分は以下の部分です。

![](https://gyazo.com/d0ec797f172246f45c8d2961428717f9.png)

パラメータa、パラメータbは「１」のままにしてください。

すると以下のような結果が得られました。

![](https://gyazo.com/ac48980bca0c0d0225fc5ec91c8053d8.png)

ここでも上段のデータのみ使用します。  
`ベイズ因子10＝３．８６`  
となっています。  
ベイズ因子の意味については[以前のブログ](https://developer.mamezou-tech.com/blogs/2022/06/03/bayesian-inference/)でご説明しましたが、値が３．８６程度では「アンケート結果”良い”＝７０％」を棄却できません。  
今回の２項検定でもベイズ統計は古典的統計(推計統計)よりもかなり厳しい判断を下します。

## まとめ

選択肢が２つしか無いときに、選ばれた値の比率が想定した比率と有意に差があるのかを検定することができました。
jamoviでは２項検定において古典的統計(推計統計)とベイズ統計のそれぞれを使って検定することができます。  
どちらの検定を使うかは、また２択なんですけどね。悩ましいところです。

[統計解析ツール紹介やその活用方法をまとめています。](https://developer.mamezou-tech.com/analytics/)

データ分析に活用して頂ければ幸いです。
