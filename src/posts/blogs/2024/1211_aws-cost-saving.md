---
title: 年末の大掃除！AWSのコスト見直しにマネコンのmyApplicationsを使う
author: kohei-tsukano
date: 2024-12-11
summerRelayUrl: https://developer.mamezou-tech.com/events/advent-calendar/2024/
tags: [aws, advent2024]
image: true
---

これは[豆蔵デベロッパーサイトアドベントカレンダー2024](/events/advent-calendar/2024/)第8日目の記事です。

## はじめに

ビジネスソリューション事業部の塚野です。最近AWSを個人的にも使いはじめ、円安の折もあり月々のかかるコストが気になってきました。
毎月費用については確認していたのですが、各サービスごとに料金体系も異なり、サービスの中には実際のメトリクスを取らないと最適な料金プランが分からなかったりするものもあったりと、見直しにもそれなりの気合が必要です。
ここは年末の大掃除…と思ってコストの見直しを決意し、色々調べたところAWSマネージメントコンソールから利用できるmyApplicationという機能がいい感じだったので今回ご紹介したいと思います。

## コスト配分タグ君ってさぁ…

今回コストの見直しをしようと思いまずはコスト最適化のベストプラクティスを調べてみました。
AWSから出されているホワイトペーパーのうち、AWSアーキテクチャ設計のベストプラクティスとしてAWS Well-Architectedフレームワークというものが公開されています。
このフレームワークは6つの柱によって支えられており、そのうちの一つに`コスト最適化の柱`があります。
@[og](https://docs.aws.amazon.com/ja_jp/wellarchitected/latest/cost-optimization-pillar/welcome.html?ref=wellarchitected-wp)

コスト最適化の柱が示すベストプラクティスは5つあり、その中に`クラウド財務管理を実施する`というものがあります。
クラウドとオンプレではそのコスト管理方法も異なってくるため、クラウドソリューションにはそれに適した方法でコストの管理、最適化、計画を行います。
AWSでは[クラウド財務管理のためのフレームワーク(Cloud Financial Management (CFM))](https://aws.amazon.com/jp/blogs/news/aws-cost-optimization-guidebook/)を公開しており、CFMの実践にはまず「クラウド利用費用の可視化」が必要だとしています。

AWSサービスの利用量を可視化するには、一般的には以下のようなCost Explorerを使用するかと思います。
「画像」

ただし、同一アカウント内の全リソースが一緒に表示されてしまうため、例えばアプリAで使っているECSではいくら、アプリBで使っているECSではいくらコストがかかっている等アプリごとにリソースを分けてコストを表示するにはリソースにタグを付けられる機能を利用したコスト分配タグを使う必要がありました。
「画像」

このコスト分配タグ、リソースにタグをつけるものなので、この機能を利用したいリソースすべてにペタペタとタグをつけていく必要がありました。
terraformなどを使ったIaCを導入している場合そこまでかもしれませんが、

コスト分配タグは各AWSリソースにタグが付けられることを利用し、

- [The Frugal Architect](https://thefrugalarchitect.com/laws/)



## コスト最適化の柱

AWSが公開しているホワイトペーパーのうち、AWSアーキテクチャ設計のベストプラクティスとしてAWS Well-Architectedフレームワークというものが公開されています。


このフレームワークは

- 運用上の優秀性（オペレーショナルエクセレンス）の柱
- セキュリティの柱
- 信頼性の柱
- パフォーマンス効率の柱
- コスト最適化の柱
- 持続可能性の柱

という6つの柱から構成されており、このうち`コスト最適化の柱`に定められたベストプラクティスに則るようにコストの見直しを図っていきます。コストは可用性や
今回コスト
